<div ng-controller="TravelDestinationListCtrl">

	<div ng-show="show_loading == true" class="loading">
		<md-progress-circular md-mode="indeterminate"></md-progress-circular>
	</div>


	<div ng-controller="SearchCtrl" ng-show="show_loading == false" class="animated fadeIn">
		<div ng-controller="PageCtrl" hide-sm hide-md>
			<div class="faux-image-container">
				<input ng-show="search_opened" class="search-input" ng-model="$parent.TravelDestinationSearch.search" flex="grow"
							 flex-offset="5" autofocus spellcheck="false">
				<img id="faux-image" ng-src="{$ page.results[0].travel_destination_list_image $}">
			</div>
		</div>

		<div>
			<div ng-class="{'search-area': search_opened == true, 'search-not-activated': search_opened == false}">
			</div>

			<a class="search-btn material-teal"
				 ng-click="search_opened = !search_opened; TravelDestinationSearch.change_search_icon(); TravelDestinationSearch.clearSearch(); TravelDestinationSearch.clearDistrictSearch()"
				 flex flex-offset="5">
				<ng-md-icon icon="{$TravelDestinationSearch.search_icon$}" aria-label="article"></ng-md-icon>
			</a>
		</div>
		<div hide-gt-md style="margin-top: 70px;"></div>


		<md-content ng-cloak class="md-padding article-list animated fadeIn" ng-show="show_loading == false">
			<div layout="row" layout-no-wrap>
				<div flex="20" hide-sm hide-md layout-padding layout="column" layout-sm="column" id="article-left-nav">
					<md-toolbar class="md-primary">
						<div class="md-toolbar-tools">
							<h2 class="md-flex md-display-2">{$district_search$}</h2>
						</div>
					</md-toolbar>
					<md-toolbar id="posts-categories" class="md-accent" ng-mouseleave="all_category_icon = 'keyboard_arrow_right'" ng-mouseenter="all_category_icon = 'keyboard_tab'">
						<a href="/artikel">
							<div class="md-toolbar-tools">
								<h2 class="md-flex">semua</h2>
								<span flex></span>
								<md-button class="md-icon-button" aria-label="Favorite">
									<ng-md-icon icon="{$all_category_icon$}" size="22" aria-label="user"></ng-md-icon>
								</md-button>
							</div>
						</a>
					</md-toolbar>
					<md-toolbar ng-repeat="category in categories" id="posts-categories" class="{$ setColor($index) $}" ng-mouseleave="category_icon = 'keyboard_arrow_right'" ng-mouseenter="category_icon = 'keyboard_tab'">
						<a href="javascript:void(0)" ng-click="TravelDestinationSearch.setSearch(category)">
							<div class="md-toolbar-tools">
								<h2 class="md-flex">{$ category $}</h2>
								<span flex></span>
								<md-button class="md-icon-button" aria-label="Favorite">
									<ng-md-icon icon="{$category_icon$}" size="22" aria-label="user"></ng-md-icon>
								</md-button>
							</div>
						</a>

				</md-toolbar>
				</div>

				<div layout="row" layout-wrap flex="80" flex-sm="100" flex-md="100">
					<div ng-repeat="travel_destination in travel_destinations.results | filter: TravelDestinationSearch.search | filter: TravelDestinationSearch.district_search" ng-controller="TravelDestinationRepeatCtrl" flex="33" flex-sm="100" flex-md="50">

						<md-card id="posts">
							<a ng-href="/lokasi-wisata/{$ slugify(travel_destination.name) $}">
								<span class="md-title article-list-title">{$ travel_destination.name $}</span>
								<div class="article-image"><img ng-src="{$thumbnail.image$}" class="md-card-image" alt="Washed Out"></div>

							</a>
							<md-card-content>
						<span class="md-body-2" layout="row" layout-wrap>
							<span flex="100" flex-gt-lg="60">
								<ng-md-icon icon="access_time" size="20" aria-label="tanggal"></ng-md-icon>
								<span ng-if="travel_destination.region.name != null" class="animated fadeIn">{$ travel_destination.region.name $}</span>
							</span>
							<span flex="100" flex-gt-lg="40">
								<ng-md-icon icon="place" size="20" aria-label="tempat"></ng-md-icon>
								<a href="javascript:void(0)" ng-click="TravelDestinationSearch.setSearch(district.name)" class="animated fadeIn">
									{$ district.name $}
								</a>
							</span>
						</span>
								<p class="md-body-1">
									{$ travel_destination_short_description $}
								</p>
							</md-card-content>
						</md-card>
						<br/>
					</div>
				</div>

			</div>

		</md-content>
	</div>
</div>